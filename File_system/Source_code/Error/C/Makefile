# The format of this file is based on GNU_Make_Makefile_templates
# https://github.com/Vdragon/GNU_Make_Makefile_templates
# 變數
# Variables
NAME_MODULE = Error
POSTFIX_TYPE_SOURCE_CODE_C = c
POSTFIX_TYPE_SOURCE_CODE_CPP = cpp
POSTFIX_TYPE_HEADER_C = h
POSTFIX_TYPE_HEADER_CPP = hpp
POSTFIX_TYPE_OBJECT_CODE = object_code
POSTFIX_TYPE_EXECUTABLE = exe
COMPILER_C = gcc
COMPILER_CPP = g++
OPTION_GCC_WITH_DEBUGGING_SYMBOLS = -g
OPTION_GPP_WITH_DEBUGGING_SYMBOLS = ${OPTION_GCC_WITH_DEBUGGING_SYMBOLS}
OPTION_GCC_ONLY_COMPILE = -c
OPTION_GPP_ONLY_COMPILE = ${OPTION_GCC_ONLY_COMPILE}
OPTION_GCC_OUTPUT = -o
OPTION_GPP_OUTPUT = ${OPTION_GCC_OUTPUT}
OPTION_MKDIR_CREATE_PARENT_AUTOMATICALLY = --parent
OPTION_REMOVE_FORCE = --force

# 主要內容
# Main content
## Generic build rules
### C/CPP source code
%.${POSTFIX_TYPE_OBJECT_CODE} : %.${POSTFIX_TYPE_SOURCE_CODE_C}
	${COMPILER_C} ${OPTION_GCC_ONLY_COMPILE} ${OPTION_GCC_OUTPUT} %.${POSTFIX_TYPE_OBJECT_CODE} %.${POSTFIX_TYPE_SOURCE_CODE_C}
%.${POSTFIX_TYPE_OBJECT_CODE} : %.${POSTFIX_TYPE_SOURCE_CODE_CPP}
	${COMPILER_CPP} ${OPTION_GPP_ONLY_COMPILE} ${OPTION_GPP_OUTPUT} %.${POSTFIX_TYPE_OBJECT_CODE} %.${POSTFIX_TYPE_SOURCE_CODE_C}

## Specific build rules
.PHONY : compile
compile : ${NAME_MODULE}.${POSTFIX_TYPE_OBJECT_CODE}
	
# ${NAME_MODULE}.${POSTFIX_TYPE_OBJECT_CODE} : ${NAME_MODULE}.${POSTFIX_TYPE_SOURCE_CODE_C} ${NAME_MODULE}.${POSTFIX_TYPE_HEADER_C}
	${COMPILER_C} ${OPTION_GCC_ONLY_COMPILE} ${OPTION_GCC_OUTPUT} ${NAME_MODULE}.${POSTFIX_TYPE_OBJECT_CODE} ${NAME_MODULE}.${POSTFIX_TYPE_SOURCE_CODE_C}

.PHONY : clean
clean :
	rm ${OPTION_REMOVE_FORCE} ${NAME_MODULE}.${POSTFIX_TYPE_OBJECT_CODE}

